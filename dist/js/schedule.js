import"./app.js";class y{constructor(e,t,n=!1){this.currentValue=e,this.dataOptions=t,this.isShortName=n,this.listenerCloseOpenMenu=({target:a})=>{const s=a.closest("[data-select-open]");(!a.closest("[data-select-open]")||s!==this.select)&&this.select.removeAttribute("data-select-open")}}set CurrentValue(e){this.currentValue=e,this.titleSelect&&(this.titleSelect.textContent=this.isShortName?this.dataOptions[this.currentValue].substring(0,3):this.dataOptions[this.currentValue])}get CurrentValue(){return this.currentValue}changeSelectOption(e){this.CurrentValue=e;const t=this.elOptionsBody.querySelector("[data-checked]");t&&t.removeAttribute("data-checked");const n=this.elOptionsBody.querySelector(`[data-value="${e}"]`);n&&n.setAttribute("data-checked","")}updateCurrentValue(e){this.CurrentValue=e;const t=this.select.querySelector(".custom-select__option[data-checked]");if(parseInt(t.getAttribute("data-value"))===e)return;t.removeAttribute("data-checked"),this.select.querySelector(`.custom-select__option[data-value="${e}"]`).setAttribute("data-checked","")}toggleOpenMenu(){this.select.hasAttribute("data-select-open")?(this.select.removeAttribute("data-select-open"),document.documentElement.removeEventListener("click",this.listenerCloseOpenMenu)):(this.placeCheckedOptionMiddleOfList(),this.select.setAttribute("data-select-open",""),document.documentElement.addEventListener("click",this.listenerCloseOpenMenu))}changeValue({target:e}){if(!e.closest(".custom-select__option"))return;const t=e.closest(".custom-select__option"),n=this.elOptionsBody.querySelector("[data-checked]");n&&n!==t&&n.removeAttribute("data-checked"),t.setAttribute("data-checked","");const a=parseInt(t.getAttribute("data-value"));if(this.CurrentValue===a){this.toggleOpenMenu();return}this.CurrentValue=a,this.toggleOpenMenu(),this.sendData()}sendData(){const e=new CustomEvent("select-change",{detail:{value:this.CurrentValue},bubbles:!0});this.select.dispatchEvent(e)}setOptions(e=this.CurrentValue){this.elOptionsBody.innerHTML="",this.dataOptions.forEach((t,n)=>{const a=document.createElement("button");a.type="button",a.className="custom-select__option",a.setAttribute("data-value",n),a.textContent=this.isShortName?t.substring(0,3):t,n===e&&(this.CurrentValue=n,a.setAttribute("data-checked","")),this.elOptionsBody.append(a)})}createSelect(){const e=document.createElement("div");e.setAttribute("data-name","month-calendar"),e.className="custom-select";const t=document.createElement("button");t.className="custom-select__button",t.type="button",this.titleSelect=t;const n=document.createElement("div");return n.className="custom-select__body",this.elOptionsBody=n,this.setOptions(),e.append(t),e.append(this.elOptionsBody),this.elOptionsBody.addEventListener("click",this.changeValue.bind(this)),t.addEventListener("click",this.toggleOpenMenu.bind(this)),e}placeCheckedOptionMiddleOfList(){const e=this.elOptionsBody.querySelector("[data-checked]");if(!e)return;const t=e.offsetTop,n=this.elOptionsBody.offsetHeight/2-e.offsetHeight/2,a=t-n;this.elOptionsBody.scrollTo({top:a,behavior:"instant"})}render(e){this.select=this.createSelect();const t=document.querySelector(e);return t&&t.append(this.select),this.select}}const d=["January","February","March","April","May","June","July","August","September","October","November","December"],b=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],p="switcher",v="/assets/img/arrow.png",m={wrapper:"day-block",date:"day-block-date",items:"day-block-row"},c={wrapper:"match",wrapRivals:"match-row",info:"match-info",time:"match-time",linkMatch:"match-link"},h={wrapper:"team",link:"team-link",logo:"team-logo",name:"team-name"},f="More info",S=[{day:1,matches:[{time:"19:30",matchLink:"#",rivals:[{name:"Golden Eagles",logo:"/assets/img/4eb8b3955c336e885305edebdaab70cc.png",teamLink:"#"},{name:"Sultanes de Monterrey",logo:"/assets/img/5a137c3b58d25de0c2000c6425a4916a.png",teamLink:"#"}]},{time:"21:00",matchLink:"#",rivals:[{name:"Sultanes de Monterrey",logo:"/assets/img/5a137c3b58d25de0c2000c6425a4916a.png",teamLink:"#"},{name:"Crimson Devils",logo:"/assets/img/870553bf9b0a741e95e579fe73358251.png",teamLink:"#"}]}]},{day:2,matches:[{time:"21:00",matchLink:"#",rivals:[{name:"Sultanes de Monterrey",logo:"/assets/img/5a137c3b58d25de0c2000c6425a4916a.png",teamLink:"#"},{name:"Crimson Devils",logo:"/assets/img/870553bf9b0a741e95e579fe73358251.png",teamLink:"#"}]},{time:"19:30",matchLink:"#",rivals:[{name:"Golden Eagles",logo:"/assets/img/4eb8b3955c336e885305edebdaab70cc.png",teamLink:"#"},{name:"Sultanes de Monterrey",logo:"/assets/img/5a137c3b58d25de0c2000c6425a4916a.png",teamLink:"#"}]}]},{day:3,matches:[{time:"21:00",matchLink:"#",rivals:[{name:"Sultanes de Monterrey",logo:"/assets/img/5a137c3b58d25de0c2000c6425a4916a.png",teamLink:"#"},{name:"Crimson Devils",logo:"/assets/img/870553bf9b0a741e95e579fe73358251.png",teamLink:"#"}]},{time:"19:30",matchLink:"#",rivals:[{name:"Golden Eagles",logo:"/assets/img/4eb8b3955c336e885305edebdaab70cc.png",teamLink:"#"},{name:"Sultanes de Monterrey",logo:"/assets/img/5a137c3b58d25de0c2000c6425a4916a.png",teamLink:"#"}]}]},{day:4,matches:[{time:"17:00",matchLink:"#",rivals:[{name:"Sultanes de Monterrey",logo:"/assets/img/5a137c3b58d25de0c2000c6425a4916a.png",teamLink:"#"},{name:"Steel Serpents",logo:"/assets/img/3218c320f39786c4fcf276f46ce7d346.png",teamLink:"#"}]},{time:"15:00",matchLink:"#",rivals:[{name:"Thunder Bats",logo:"/assets/img/fb77b97b09b94776b4ea76eea1a437c9.png",teamLink:"#"},{name:"Sultanes de Monterrey",logo:"/assets/img/5a137c3b58d25de0c2000c6425a4916a.png",teamLink:"#"}]}]},{day:5,matches:[{time:"15:00",matchLink:"#",rivals:[{name:"Thunder Bats",logo:"/assets/img/fb77b97b09b94776b4ea76eea1a437c9.png",teamLink:"#"},{name:"Sultanes de Monterrey",logo:"/assets/img/5a137c3b58d25de0c2000c6425a4916a.png",teamLink:"#"}]}]},{day:6,matches:[{time:"17:00",matchLink:"#",rivals:[{name:"Sultanes de Monterrey",logo:"/assets/img/5a137c3b58d25de0c2000c6425a4916a.png",teamLink:"#"},{name:"Steel Serpents",logo:"/assets/img/3218c320f39786c4fcf276f46ce7d346.png",teamLink:"#"}]}]},{day:7,matches:[{time:"17:00",matchLink:"#",rivals:[{name:"Sultanes de Monterrey",logo:"/assets/img/5a137c3b58d25de0c2000c6425a4916a.png",teamLink:"#"},{name:"Steel Serpents",logo:"/assets/img/3218c320f39786c4fcf276f46ce7d346.png",teamLink:"#"}]}]}];class w{constructor(e){this.currentYear=e,this.years=this.createDataOption()}setNewYear(e){const t=this.years[e.detail.value];this.updateState(t),this.sendEvent()}updateState(e){this.currentYear=e,e===this.startYear||e===this.endYear?(this.years=this.createDataOption(),this.elSelect.dataOptions=this.years,this.elSelect.setOptions(this.years.indexOf(this.currentYear))):this.elSelect.updateCurrentValue(this.years.indexOf(this.currentYear))}sendEvent(){const e=new CustomEvent("change-year",{detail:{year:this.currentYear},bubbles:!0});this.wrapper.dispatchEvent(e)}handleYear(e){const a=e.target.closest(`.${p}`).getAttribute("data-direction")==="prev"?-1:1,s=this.currentYear+a;this.updateState(s),this.sendEvent()}render(e){const t=document.querySelector(e);t&&(this.prevMonthButton=this.createButtonHandler("prev"),this.nextMonthButton=this.createButtonHandler("next"),this.elSelect=new y(this.years.indexOf(this.currentYear),this.years),t.append(this.elSelect.render()),t.addEventListener("select-change",this.setNewYear.bind(this)),t.prepend(this.prevMonthButton),t.append(this.nextMonthButton),this.wrapper=t)}createButton(){const e=document.createElement("button");return e.type="button",e.className="switcher",e.textContent=this.currentYear,e.addEventListener("click",this.toggleSubMenu.bind(this)),e}createButtonHandler(e){const t=document.createElement("button");t.type="button",t.className=p,t.setAttribute("data-direction",e);const n=e==="prev"?"previous":"next";t.ariaLabel=`Go to ${n} year`;const a=document.createElement("img");return a.src=v,a.alt="icon arrow",t.append(a),t.addEventListener("click",this.handleYear.bind(this)),t}createDataOption(e=this.currentYear){this.startYear=e-5,this.endYear=e+5;const t=[];for(let n=this.startYear;n<=this.endYear;n++)t.push(n);return t}}class L{constructor(e){this.currentMonth=e}createButton(e){const t=document.createElement("button");t.type="button",t.className=p,t.setAttribute("data-direction",e);const n=e==="prev"?"previous":"next";t.ariaLabel=`Go to ${n} month`;const a=document.createElement("img");return a.src=v,a.alt="icon arrow",t.append(a),t.addEventListener("click",this.changeMonth.bind(this)),t}changeMonth(e){const t=e.type,n={};if(t==="select-change")this.currentMonth=e.detail.value;else{const o=e.target.closest("button").getAttribute("data-direction")==="prev"?-1:1;this.currentMonth+=o,this.currentMonth===d.length?(this.currentMonth=0,n.moveYear=1):this.currentMonth<0&&(this.currentMonth=d.length-1,n.moveYear=-1)}this.select.changeSelectOption(this.currentMonth),n.month=this.currentMonth;const a=new CustomEvent("change-month",{detail:n,bubbles:!0});this.wrapper.dispatchEvent(a)}render(e){const t=document.querySelector(e);if(!t)return;const n=t.hasAttribute("data-short-month");this.prevMonthButton=this.createButton("prev"),this.nextMonthButton=this.createButton("next"),this.select=new y(this.currentMonth,d.map(a=>a),n),t.append(this.prevMonthButton),t.append(this.select.render()),t.append(this.nextMonthButton),t.addEventListener("select-change",this.changeMonth.bind(this)),this.wrapper=t}}class C{constructor(e,t,n){this.rivals=n,this.time=e,this.matchLink=t}render(){return this.card=document.createElement("div"),this.card.className=c.wrapper,this.createCard(!!this.rivals),this.card}createCard(){const e=document.createElement("div");e.className=c.wrapRivals,this.rivals.map(s=>this.createRival(s)).forEach(s=>e.append(s));const t=document.createElement("div");t.className=c.info;const n=document.createElement("div");n.className=c.time,n.textContent=this.time;const a=document.createElement("a");a.className=c.linkMatch,a.href=this.matchLink,a.textContent=f,t.append(n),t.append(a),this.card.append(e),this.card.append(t)}createRival(e){const t=document.createElement("div");t.className=h.wrapper;const n=document.createElement("a");n.className=h.link,n.href=e.teamLink;const a=document.createElement("img");a.className=h.logo,a.src=e.logo,a.alt=e.name;const s=document.createElement("h4");return s.className=h.name,s.textContent=e.name,n.append(a),n.append(s),t.append(n),t}}class E{constructor(){const e=new Date;this.currentYear=e.getFullYear(),this.currentMonth=e.getMonth()}calcMonth(){this.calendarDataForPrint={},this.calcCurrentMonth(this.currentYear,this.currentMonth)}calcCurrentMonth(e,t){this.calendarDataForPrint.currentMonth={startDay:1,endDay:new Date(e,t+1,0).getDate()}}getNameMonth(){return d[this.currentMonth]}fillCalendarBody(){this.elCalendarBody.innerHTML="";const{startDay:e,endDay:t}=this.calendarDataForPrint.currentMonth;for(let n=e;n<=t;n++){const a=S.find(r=>r.day===n);if(!a)continue;const s=document.createElement("div");s.className=m.wrapper;const o=this.getNameMonth(),g=new Date(`${o} ${a.day}, ${this.currentYear}`).getDay(),k=g===0?b[6]:b[g-1],l=document.createElement("div");l.className=m.date,l.textContent=`${k} ${a.day} ${o} ${this.currentYear}`;const u=document.createElement("div");u.className=m.items;const{matches:M}=a;M.forEach(r=>{u.append(new C(r.time,r.matchLink,r.rivals).render())}),s.append(l),s.append(u),this.elCalendarBody.append(s)}}rerenderCalendarBody(){this.calcMonth(),this.fillCalendarBody()}setNewYear({detail:e}){this.currentYear=e.year,this.rerenderCalendarBody()}setNewMonth({detail:e}){this.currentMonth=e.month,"moveYear"in e&&(this.currentYear+=e.moveYear,this.switcherYear.updateState(this.currentYear)),this.rerenderCalendarBody()}render(e="[data-calendar]"){const t=document.querySelector(e);if(!t)return;this.elCalendarBody=t.querySelector("[data-calendar-body]"),this.rerenderCalendarBody();const n=new w(this.currentYear);n.render(`${e} [data-year-switcher]`),this.switcherYear=n,new L(this.currentMonth).render(`${e} [data-month-switcher]`),t.addEventListener("change-year",this.setNewYear.bind(this)),t.addEventListener("change-month",this.setNewMonth.bind(this))}}document.querySelector("[data-calendar]")&&window.addEventListener("load",()=>new E().render());
